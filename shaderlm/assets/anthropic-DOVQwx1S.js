const C="0.27.3";let Be=!1,L,Le,ke,Xe,He,Ve;function ot(s,e={auto:!1}){if(Be)throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${s.kind}'\` before importing anything else from @anthropic-ai/sdk`);if(L)throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${s.kind}'\` after \`import '@anthropic-ai/sdk/shims/${L}'\``);Be=e.auto,L=s.kind,Le=s.fetch,ke=s.File,Xe=s.ReadableStream,He=s.getDefaultAgent,Ve=s.fileFromPath}class ct{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function ut({manuallyImported:s}={}){const e=s?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:\n- `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)\n- `import '@anthropic-ai/sdk/shims/web'` (otherwise)\n";let t,r,n,i;try{t=fetch,r=Request,n=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:n,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new ct(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads")},isFsReadStream:a=>!1}}L||ot(ut(),{auto:!0});class b{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*n(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const a of lt(e,t)){if(a.event==="completion")try{yield JSON.parse(a.data)}catch(o){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),o}if(a.event==="message_start"||a.event==="message_delta"||a.event==="message_stop"||a.event==="content_block_start"||a.event==="content_block_delta"||a.event==="content_block_stop")try{yield JSON.parse(a.data)}catch(o){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),o}if(a.event!=="ping"&&a.event==="error")throw d.generate(void 0,`SSE Error: ${a.data}`,a.data,Qe(e.headers))}i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||t.abort()}}return new b(n,t)}static fromReadableStream(e,t){let r=!1;async function*n(){const a=new R,o=Je(e);for await(const f of o)for(const S of a.decode(f))yield S;for(const f of a.flush())yield f}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of n())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new b(i,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),n=i=>({next:()=>{if(i.length===0){const a=r.next();e.push(a),t.push(a)}return i.shift()}});return[new b(()=>n(e),this.controller),new b(()=>n(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new Xe({async start(){t=e[Symbol.asyncIterator]()},async pull(n){try{const{value:i,done:a}=await t.next();if(a)return n.close();const o=r.encode(JSON.stringify(i)+`
`);n.enqueue(o)}catch(i){n.error(i)}},async cancel(){var n;await((n=t.return)==null?void 0:n.call(t))}})}}async function*lt(s,e){if(!s.body)throw e.abort(),new l("Attempted to iterate over a response with no body");const t=new dt,r=new R,n=Je(s.body);for await(const i of ht(n))for(const a of r.decode(i)){const o=t.decode(a);o&&(yield o)}for(const i of r.flush()){const a=t.decode(i);a&&(yield a)}}async function*ht(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let n=new Uint8Array(e.length+r.length);n.set(e),n.set(r,e.length),e=n;let i;for(;(i=ft(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}function ft(s){for(let r=0;r<s.length-2;r++){if(s[r]===10&&s[r+1]===10||s[r]===13&&s[r+1]===13)return r+2;if(s[r]===13&&s[r+1]===10&&r+3<s.length&&s[r+2]===13&&s[r+3]===10)return r+4}return-1}class dt{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=mt(e,":");return n.startsWith(" ")&&(n=n.substring(1)),t==="event"?this.event=n:t==="data"&&this.data.push(n),null}}class R{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=R.NEWLINE_CHARS.has(t[t.length-1]||"");let n=t.split(R.NEWLINE_REGEXP);return r&&n.pop(),n.length===1&&!r?(this.buffer.push(n[0]),[]):(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new l(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new l(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new l("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}R.NEWLINE_CHARS=new Set([`
`,"\r"]);R.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mt(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}function Je(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const gt=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",pt=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&ue(s),ue=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function";async function wt(s,e,t){var n;if(s=await s,pt(s))return s;if(gt(s)){const i=await s.blob();e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=ue(i)?[await i.arrayBuffer()]:[i];return new ke(a,e,t)}const r=await yt(s);if(e||(e=bt(s)??"unknown_file"),!(t!=null&&t.type)){const i=(n=r[0])==null?void 0:n.type;typeof i=="string"&&(t={...t,type:i})}return new ke(r,e,t)}async function yt(s){var t;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(ue(s))e.push(await s.arrayBuffer());else if(St(s))for await(const r of s)e.push(r);else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${(t=s==null?void 0:s.constructor)==null?void 0:t.name}; props: ${_t(s)}`);return e}function _t(s){return`[${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}function bt(s){var e;return me(s.name)||me(s.filename)||((e=me(s.path))==null?void 0:e.split(/[\\/]/).pop())}const me=s=>{if(typeof s=="string")return s;if(typeof Buffer<"u"&&s instanceof Buffer)return String(s)},St=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",ve=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody";var v={};async function Ke(s){const{response:e}=s;if(s.options.stream)return j("response",e.status,e.url,e.headers,e.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(e,s.controller):b.fromSSEResponse(e,s.controller);if(e.status===204)return null;if(s.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const i=await e.json();return j("response",e.status,e.url,e.headers,i),i}const n=await e.text();return j("response",e.status,e.url,e.headers,n),n}class le extends Promise{constructor(e,t=Ke){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new le(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Mt{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:n,fetch:i}){this.baseURL=e,this.maxRetries=ge("maxRetries",t),this.timeout=ge("timeout",r),this.httpAgent=n,this.fetch=i??Le}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Rt(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${jt()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async n=>{const i=n&&ue(n==null?void 0:n.body)?new DataView(await n.body.arrayBuffer()):(n==null?void 0:n.body)instanceof DataView?n.body:(n==null?void 0:n.body)instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n==null?void 0:n.body)?new DataView(n.body.buffer):n==null?void 0:n.body;return{method:e,path:t,...n,body:i}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){var O;const{method:t,path:r,query:n,headers:i={}}=e,a=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:ve(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(a),f=this.buildURL(r,n);"timeout"in e&&ge("timeout",e.timeout);const S=e.timeout??this.timeout,_=e.httpAgent??this.httpAgent??He(f),I=S+1e3;typeof((O=_==null?void 0:_.options)==null?void 0:O.timeout)=="number"&&I>(_.options.timeout??0)&&(_.options.timeout=I),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const H=this.buildHeaders({options:e,headers:i,contentLength:o});return{req:{method:t,...a&&{body:a},headers:H,..._&&{agent:_},signal:e.signal??null},url:f,timeout:S}}buildHeaders({options:e,headers:t,contentLength:r}){const n={};r&&(n["content-length"]=r);const i=this.defaultHeaders(e);return Te(n,i),Te(n,t),ve(e.body)&&L!=="node"&&delete n["content-type"],this.validateHeaders(n,t),n}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,n){return d.generate(e,t,r,n)}request(e,t=null){return new le(this.makeRequest(e,t))}async makeRequest(e,t){var _,I;const r=await e;t==null&&(t=r.maxRetries??this.maxRetries),await this.prepareOptions(r);const{req:n,url:i,timeout:a}=this.buildRequest(r);if(await this.prepareRequest(n,{url:i,options:r}),j("request",i,r,n.headers),(_=r.signal)!=null&&_.aborted)throw new y;const o=new AbortController,f=await this.fetchWithTimeout(i,n,a,o).catch(Ae);if(f instanceof Error){if((I=r.signal)!=null&&I.aborted)throw new y;if(t)return this.retryRequest(r,t);throw f.name==="AbortError"?new ze:new he({cause:f})}const S=Qe(f.headers);if(!f.ok){if(t&&this.shouldRetry(f)){const de=`retrying, ${t} attempts remaining`;return j(`response (error; ${de})`,f.status,i,S),this.retryRequest(r,t,S)}const H=await f.text().catch(de=>Ae(de).message),fe=kt(H),O=fe?void 0:H;throw j(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,f.status,i,S,O),this.makeStatusError(f.status,fe,O,S)}return{response:f,options:r,controller:o}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new Pt(this,r,e)}buildURL(e,t){const r=Ct(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return Ce(n)||(t={...n,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new l(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,n){const{signal:i,...a}=t||{};i&&i.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:n.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let n;const i=r==null?void 0:r["retry-after-ms"];if(i){const o=parseFloat(i);Number.isNaN(o)||(n=o)}const a=r==null?void 0:r["retry-after"];if(a&&!n){const o=parseFloat(a);Number.isNaN(o)?n=Date.parse(a)-Date.now():n=o*1e3}if(!(n&&0<=n&&n<60*1e3)){const o=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,o)}return await Bt(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const i=t-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${C}`}}class Pt extends le{constructor(e,t,r){super(t,async n=>new r(e,n.response,await Ke(n),n.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Qe=s=>new Proxy(Object.fromEntries(s.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),xt=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":C,"X-Stainless-OS":Ie(Deno.build.os),"X-Stainless-Arch":je(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":C,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":C,"X-Stainless-OS":Ie(process.platform),"X-Stainless-Arch":je(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const s=Et();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":C,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":C,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Et(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const r=t.exec(navigator.userAgent);if(r){const n=r[1]||0,i=r[2]||0,a=r[3]||0;return{browser:e,version:`${n}.${i}.${a}`}}}return null}const je=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",Ie=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let Oe;const Rt=()=>Oe??(Oe=xt()),kt=s=>{try{return JSON.parse(s)}catch{return}},At=new RegExp("^(?:[a-z]+:)?//","i"),Ct=s=>At.test(s),Bt=s=>new Promise(e=>setTimeout(e,s)),ge=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new l(`${s} must be an integer`);if(e<0)throw new l(`${s} must be a positive integer`);return e},Ae=s=>s instanceof Error?s:new Error(s),pe=s=>{var e,t,r,n;if(typeof process<"u")return((e=v==null?void 0:v[s])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(n=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,s))==null?void 0:n.trim()};function Ce(s){if(!s)return!0;for(const e in s)return!1;return!0}function vt(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Te(s,e){for(const t in e){if(!vt(e,t))continue;const r=t.toLowerCase();if(!r)continue;const n=e[t];n===null?delete s[r]:n!==void 0&&(s[r]=n)}}function j(s,...e){typeof process<"u"&&(v==null?void 0:v.DEBUG)==="true"&&console.log(`Anthropic:DEBUG:${s}`,...e)}const jt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)}),It=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class l extends Error{}class d extends l{constructor(e,t,r,n){super(`${d.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.request_id=n==null?void 0:n["request-id"],this.error=t}static makeMessage(e,t,r){const n=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e)return new he({message:r,cause:Ae(t)});const i=t;return e===400?new Ge(e,i,r,n):e===401?new Ye(e,i,r,n):e===403?new Ze(e,i,r,n):e===404?new et(e,i,r,n):e===409?new tt(e,i,r,n):e===422?new rt(e,i,r,n):e===429?new st(e,i,r,n):e>=500?new nt(e,i,r,n):new d(e,i,r,n)}}class y extends d{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class he extends d{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class ze extends he{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ge extends d{constructor(){super(...arguments),this.status=400}}class Ye extends d{constructor(){super(...arguments),this.status=401}}class Ze extends d{constructor(){super(...arguments),this.status=403}}class et extends d{constructor(){super(...arguments),this.status=404}}class tt extends d{constructor(){super(...arguments),this.status=409}}class rt extends d{constructor(){super(...arguments),this.status=422}}class st extends d{constructor(){super(...arguments),this.status=429}}class nt extends d{}class X{constructor(e){this._client=e}}const Ot=s=>{let e=0,t=[];for(;e<s.length;){let r=s[e];if(r==="\\"){e++;continue}if(r==="{"){t.push({type:"brace",value:"{"}),e++;continue}if(r==="}"){t.push({type:"brace",value:"}"}),e++;continue}if(r==="["){t.push({type:"paren",value:"["}),e++;continue}if(r==="]"){t.push({type:"paren",value:"]"}),e++;continue}if(r===":"){t.push({type:"separator",value:":"}),e++;continue}if(r===","){t.push({type:"delimiter",value:","}),e++;continue}if(r==='"'){let o="",f=!1;for(r=s[++e];r!=='"';){if(e===s.length){f=!0;break}if(r==="\\"){if(e++,e===s.length){f=!0;break}o+=r+s[e],r=s[++e]}else o+=r,r=s[++e]}r=s[++e],f||t.push({type:"string",value:o});continue}if(r&&/\s/.test(r)){e++;continue}let i=/[0-9]/;if(r&&i.test(r)||r==="-"||r==="."){let o="";for(r==="-"&&(o+=r,r=s[++e]);r&&i.test(r)||r===".";)o+=r,r=s[++e];t.push({type:"number",value:o});continue}let a=/[a-z]/i;if(r&&a.test(r)){let o="";for(;r&&a.test(r)&&e!==s.length;)o+=r,r=s[++e];if(o=="true"||o=="false"||o==="null")t.push({type:"name",value:o});else{e++;continue}continue}e++}return t},B=s=>{if(s.length===0)return s;let e=s[s.length-1];switch(e.type){case"separator":return s=s.slice(0,s.length-1),B(s);case"number":let t=e.value[e.value.length-1];if(t==="."||t==="-")return s=s.slice(0,s.length-1),B(s);case"string":let r=s[s.length-2];if((r==null?void 0:r.type)==="delimiter")return s=s.slice(0,s.length-1),B(s);if((r==null?void 0:r.type)==="brace"&&r.value==="{")return s=s.slice(0,s.length-1),B(s);break;case"delimiter":return s=s.slice(0,s.length-1),B(s)}return s},Tt=s=>{let e=[];return s.map(t=>{t.type==="brace"&&(t.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),t.type==="paren"&&(t.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(t=>{t==="}"?s.push({type:"brace",value:"}"}):t==="]"&&s.push({type:"paren",value:"]"})}),s},qt=s=>{let e="";return s.map(t=>{switch(t.type){case"string":e+='"'+t.value+'"';break;default:e+=t.value;break}}),e},it=s=>JSON.parse(qt(Tt(B(Ot(s)))));var m=function(s,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(s,t):n?n.value=t:e.set(s,t),t},c=function(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)},p,x,V,J,T,q,K,F,M,$,Q,z,k,we,qe,ye,_e,be,Se,Fe;const $e="__json_buf";class re{constructor(){p.add(this),this.messages=[],this.receivedMessages=[],x.set(this,void 0),this.controller=new AbortController,V.set(this,void 0),J.set(this,()=>{}),T.set(this,()=>{}),q.set(this,void 0),K.set(this,()=>{}),F.set(this,()=>{}),M.set(this,{}),$.set(this,!1),Q.set(this,!1),z.set(this,!1),k.set(this,!1),ye.set(this,e=>{if(m(this,Q,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new y),e instanceof y)return m(this,z,!0,"f"),this._emit("abort",e);if(e instanceof l)return this._emit("error",e);if(e instanceof Error){const t=new l(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new l(String(e)))}),m(this,V,new Promise((e,t)=>{m(this,J,e,"f"),m(this,T,t,"f")}),"f"),m(this,q,new Promise((e,t)=>{m(this,K,e,"f"),m(this,F,t,"f")}),"f"),c(this,V,"f").catch(()=>{}),c(this,q,"f").catch(()=>{})}static fromReadableStream(e){const t=new re;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r){const n=new re;for(const i of t.messages)n._addPromptCachingBetaMessageParam(i);return n._run(()=>n._createPromptCachingBetaMessage(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},c(this,ye,"f"))}_addPromptCachingBetaMessageParam(e){this.messages.push(e)}_addPromptCachingBetaMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createPromptCachingBetaMessage(e,t,r){var a;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),c(this,p,"m",_e).call(this);const i=await e.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of i)c(this,p,"m",be).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new y;c(this,p,"m",Se).call(this)}_connected(){this.ended||(c(this,J,"f").call(this),this._emit("connect"))}get ended(){return c(this,$,"f")}get errored(){return c(this,Q,"f")}get aborted(){return c(this,z,"f")}abort(){this.controller.abort()}on(e,t){return(c(this,M,"f")[e]||(c(this,M,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=c(this,M,"f")[e];if(!r)return this;const n=r.findIndex(i=>i.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(c(this,M,"f")[e]||(c(this,M,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{m(this,k,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){m(this,k,!0,"f"),await c(this,q,"f")}get currentMessage(){return c(this,x,"f")}async finalMessage(){return await this.done(),c(this,p,"m",we).call(this)}async finalText(){return await this.done(),c(this,p,"m",qe).call(this)}_emit(e,...t){if(c(this,$,"f"))return;e==="end"&&(m(this,$,!0,"f"),c(this,K,"f").call(this));const r=c(this,M,"f")[e];if(r&&(c(this,M,"f")[e]=r.filter(n=>!n.once),r.forEach(({listener:n})=>n(...t))),e==="abort"){const n=t[0];!c(this,k,"f")&&!(r!=null&&r.length)&&Promise.reject(n),c(this,T,"f").call(this,n),c(this,F,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=t[0];!c(this,k,"f")&&!(r!=null&&r.length)&&Promise.reject(n),c(this,T,"f").call(this,n),c(this,F,"f").call(this,n),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalPromptCachingBetaMessage",c(this,p,"m",we).call(this))}async _fromReadableStream(e,t){var i;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),c(this,p,"m",_e).call(this),this._connected();const n=b.fromReadableStream(e,this.controller);for await(const a of n)c(this,p,"m",be).call(this,a);if((i=n.controller.signal)!=null&&i.aborted)throw new y;c(this,p,"m",Se).call(this)}[(x=new WeakMap,V=new WeakMap,J=new WeakMap,T=new WeakMap,q=new WeakMap,K=new WeakMap,F=new WeakMap,M=new WeakMap,$=new WeakMap,Q=new WeakMap,z=new WeakMap,k=new WeakMap,ye=new WeakMap,p=new WeakSet,we=function(){if(this.receivedMessages.length===0)throw new l("stream ended without producing a PromptCachingBetaMessage with role=assistant");return this.receivedMessages.at(-1)},qe=function(){if(this.receivedMessages.length===0)throw new l("stream ended without producing a PromptCachingBetaMessage with role=assistant");const t=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(t.length===0)throw new l("stream ended without producing a content block with type=text");return t.join(" ")},_e=function(){this.ended||m(this,x,void 0,"f")},be=function(t){if(this.ended)return;const r=c(this,p,"m",Fe).call(this,t);switch(this._emit("streamEvent",t,r),t.type){case"content_block_delta":{const n=r.content.at(-1);t.delta.type==="text_delta"&&n.type==="text"?this._emit("text",t.delta.text,n.text||""):t.delta.type==="input_json_delta"&&n.type==="tool_use"&&n.input&&this._emit("inputJson",t.delta.partial_json,n.input);break}case"message_stop":{this._addPromptCachingBetaMessageParam(r),this._addPromptCachingBetaMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{m(this,x,r,"f");break}}},Se=function(){if(this.ended)throw new l("stream has ended, this shouldn't happen");const t=c(this,x,"f");if(!t)throw new l("request ended without sending any chunks");return m(this,x,void 0,"f"),t},Fe=function(t){let r=c(this,x,"f");if(t.type==="message_start"){if(r)throw new l(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!r)throw new l(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return r;case"message_delta":return r.stop_reason=t.delta.stop_reason,r.stop_sequence=t.delta.stop_sequence,r.usage.output_tokens=t.usage.output_tokens,r;case"content_block_start":return r.content.push(t.content_block),r;case"content_block_delta":{const n=r.content.at(t.index);if((n==null?void 0:n.type)==="text"&&t.delta.type==="text_delta")n.text+=t.delta.text;else if((n==null?void 0:n.type)==="tool_use"&&t.delta.type==="input_json_delta"){let i=n[$e]||"";i+=t.delta.partial_json,Object.defineProperty(n,$e,{value:i,enumerable:!1,writable:!0}),i&&(n.input=it(i))}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("streamEvent",n=>{const i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{r=!0;for(const i of t)i.reject(n);t.length=0}),this.on("error",n=>{r=!0;for(const i of t)i.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>t.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new b(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}let se=class extends X{create(e,t){return this._client.post("/v1/messages?beta=prompt_caching",{body:e,timeout:this._client._options.timeout??6e5,...t,headers:{"anthropic-beta":"prompt-caching-2024-07-31",...t==null?void 0:t.headers},stream:e.stream??!1})}stream(e,t){return re.createMessage(this,e,t)}};se||(se={});class ne extends X{constructor(){super(...arguments),this.messages=new se(this._client)}}(function(s){s.Messages=se})(ne||(ne={}));class ie extends X{constructor(){super(...arguments),this.promptCaching=new ne(this._client)}}(function(s){s.PromptCaching=ne})(ie||(ie={}));class ae extends X{create(e,t){return this._client.post("/v1/complete",{body:e,timeout:this._client._options.timeout??6e5,...t,stream:e.stream??!1})}}ae||(ae={});var g=function(s,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(s,t):n?n.value=t:e.set(s,t),t},u=function(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)},w,E,G,Y,N,U,Z,D,P,W,ee,te,A,Me,Ne,Pe,xe,Ee,Re,Ue;const De="__json_buf";class oe{constructor(){w.add(this),this.messages=[],this.receivedMessages=[],E.set(this,void 0),this.controller=new AbortController,G.set(this,void 0),Y.set(this,()=>{}),N.set(this,()=>{}),U.set(this,void 0),Z.set(this,()=>{}),D.set(this,()=>{}),P.set(this,{}),W.set(this,!1),ee.set(this,!1),te.set(this,!1),A.set(this,!1),Pe.set(this,e=>{if(g(this,ee,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new y),e instanceof y)return g(this,te,!0,"f"),this._emit("abort",e);if(e instanceof l)return this._emit("error",e);if(e instanceof Error){const t=new l(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new l(String(e)))}),g(this,G,new Promise((e,t)=>{g(this,Y,e,"f"),g(this,N,t,"f")}),"f"),g(this,U,new Promise((e,t)=>{g(this,Z,e,"f"),g(this,D,t,"f")}),"f"),u(this,G,"f").catch(()=>{}),u(this,U,"f").catch(()=>{})}static fromReadableStream(e){const t=new oe;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r){const n=new oe;for(const i of t.messages)n._addMessageParam(i);return n._run(()=>n._createMessage(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),n}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},u(this,Pe,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,r){var a;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),u(this,w,"m",xe).call(this);const i=await e.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of i)u(this,w,"m",Ee).call(this,o);if((a=i.controller.signal)!=null&&a.aborted)throw new y;u(this,w,"m",Re).call(this)}_connected(){this.ended||(u(this,Y,"f").call(this),this._emit("connect"))}get ended(){return u(this,W,"f")}get errored(){return u(this,ee,"f")}get aborted(){return u(this,te,"f")}abort(){this.controller.abort()}on(e,t){return(u(this,P,"f")[e]||(u(this,P,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=u(this,P,"f")[e];if(!r)return this;const n=r.findIndex(i=>i.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(u(this,P,"f")[e]||(u(this,P,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{g(this,A,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){g(this,A,!0,"f"),await u(this,U,"f")}get currentMessage(){return u(this,E,"f")}async finalMessage(){return await this.done(),u(this,w,"m",Me).call(this)}async finalText(){return await this.done(),u(this,w,"m",Ne).call(this)}_emit(e,...t){if(u(this,W,"f"))return;e==="end"&&(g(this,W,!0,"f"),u(this,Z,"f").call(this));const r=u(this,P,"f")[e];if(r&&(u(this,P,"f")[e]=r.filter(n=>!n.once),r.forEach(({listener:n})=>n(...t))),e==="abort"){const n=t[0];!u(this,A,"f")&&!(r!=null&&r.length)&&Promise.reject(n),u(this,N,"f").call(this,n),u(this,D,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=t[0];!u(this,A,"f")&&!(r!=null&&r.length)&&Promise.reject(n),u(this,N,"f").call(this,n),u(this,D,"f").call(this,n),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",u(this,w,"m",Me).call(this))}async _fromReadableStream(e,t){var i;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),u(this,w,"m",xe).call(this),this._connected();const n=b.fromReadableStream(e,this.controller);for await(const a of n)u(this,w,"m",Ee).call(this,a);if((i=n.controller.signal)!=null&&i.aborted)throw new y;u(this,w,"m",Re).call(this)}[(E=new WeakMap,G=new WeakMap,Y=new WeakMap,N=new WeakMap,U=new WeakMap,Z=new WeakMap,D=new WeakMap,P=new WeakMap,W=new WeakMap,ee=new WeakMap,te=new WeakMap,A=new WeakMap,Pe=new WeakMap,w=new WeakSet,Me=function(){if(this.receivedMessages.length===0)throw new l("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Ne=function(){if(this.receivedMessages.length===0)throw new l("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter(r=>r.type==="text").map(r=>r.text);if(t.length===0)throw new l("stream ended without producing a content block with type=text");return t.join(" ")},xe=function(){this.ended||g(this,E,void 0,"f")},Ee=function(t){if(this.ended)return;const r=u(this,w,"m",Ue).call(this,t);switch(this._emit("streamEvent",t,r),t.type){case"content_block_delta":{const n=r.content.at(-1);t.delta.type==="text_delta"&&n.type==="text"?this._emit("text",t.delta.text,n.text||""):t.delta.type==="input_json_delta"&&n.type==="tool_use"&&n.input&&this._emit("inputJson",t.delta.partial_json,n.input);break}case"message_stop":{this._addMessageParam(r),this._addMessage(r,!0);break}case"content_block_stop":{this._emit("contentBlock",r.content.at(-1));break}case"message_start":{g(this,E,r,"f");break}}},Re=function(){if(this.ended)throw new l("stream has ended, this shouldn't happen");const t=u(this,E,"f");if(!t)throw new l("request ended without sending any chunks");return g(this,E,void 0,"f"),t},Ue=function(t){let r=u(this,E,"f");if(t.type==="message_start"){if(r)throw new l(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!r)throw new l(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":return r;case"message_delta":return r.stop_reason=t.delta.stop_reason,r.stop_sequence=t.delta.stop_sequence,r.usage.output_tokens=t.usage.output_tokens,r;case"content_block_start":return r.content.push(t.content_block),r;case"content_block_delta":{const n=r.content.at(t.index);if((n==null?void 0:n.type)==="text"&&t.delta.type==="text_delta")n.text+=t.delta.text;else if((n==null?void 0:n.type)==="tool_use"&&t.delta.type==="input_json_delta"){let i=n[De]||"";i+=t.delta.partial_json,Object.defineProperty(n,De,{value:i,enumerable:!1,writable:!0}),i&&(n.input=it(i))}return r}case"content_block_stop":return r}},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("streamEvent",n=>{const i=t.shift();i?i.resolve(n):e.push(n)}),this.on("end",()=>{r=!0;for(const n of t)n.resolve(void 0);t.length=0}),this.on("abort",n=>{r=!0;for(const i of t)i.reject(n);t.length=0}),this.on("error",n=>{r=!0;for(const i of t)i.reject(n);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,a)=>t.push({resolve:i,reject:a})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new b(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class ce extends X{create(e,t){return e.model in We&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${We[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`),this._client.post("/v1/messages",{body:e,timeout:this._client._options.timeout??6e5,...t,stream:e.stream??!1})}stream(e,t){return oe.createMessage(this,e,t)}}const We={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024"};ce||(ce={});var at;class h extends Mt{constructor({baseURL:e=pe("ANTHROPIC_BASE_URL"),apiKey:t=pe("ANTHROPIC_API_KEY")??null,authToken:r=pe("ANTHROPIC_AUTH_TOKEN")??null,...n}={}){const i={apiKey:t,authToken:r,...n,baseURL:e||"https://api.anthropic.com"};if(!i.dangerouslyAllowBrowser&&It())throw new l(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });

TODO: link!
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new ae(this),this.messages=new ce(this),this.beta=new ie(this),this._options=i,this.apiKey=t,this.authToken=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01",...this._options.defaultHeaders}}validateHeaders(e,t){if(!(this.apiKey&&e["x-api-key"])&&t["x-api-key"]!==null&&!(this.authToken&&e.authorization)&&t.authorization!==null)throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){const t=this.apiKeyAuth(e),r=this.bearerAuth(e);return t!=null&&!Ce(t)?t:r!=null&&!Ce(r)?r:{}}apiKeyAuth(e){return this.apiKey==null?{}:{"X-Api-Key":this.apiKey}}bearerAuth(e){return this.authToken==null?{}:{Authorization:`Bearer ${this.authToken}`}}}at=h;h.Anthropic=at;h.HUMAN_PROMPT=`

Human:`;h.AI_PROMPT=`

Assistant:`;h.DEFAULT_TIMEOUT=6e5;h.AnthropicError=l;h.APIError=d;h.APIConnectionError=he;h.APIConnectionTimeoutError=ze;h.APIUserAbortError=y;h.NotFoundError=et;h.ConflictError=tt;h.RateLimitError=st;h.BadRequestError=Ge;h.AuthenticationError=Ye;h.InternalServerError=nt;h.PermissionDeniedError=Ze;h.UnprocessableEntityError=rt;h.toFile=wt;h.fileFromPath=Ve;const{HUMAN_PROMPT:Xt,AI_PROMPT:Ht}=h;(function(s){s.Completions=ae,s.Messages=ce,s.Beta=ie})(h||(h={}));export{h as A};
